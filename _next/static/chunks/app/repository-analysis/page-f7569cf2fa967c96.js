(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[912],{3998:(e,s,a)=>{"use strict";a.d(s,{$:()=>d});var t=a(95155),r=a(12115),l=a(32467),i=a(83101),n=a(64269);let c=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:a,variant:r,size:i,asChild:d=!1,...o}=e,m=d?l.DX:"button";return(0,t.jsx)(m,{className:(0,n.cn)(c({variant:r,size:i,className:a})),ref:s,...o})});d.displayName="Button"},11186:(e,s,a)=>{"use strict";a.d(s,{bq:()=>x,eb:()=>y,gC:()=>j,l6:()=>o,yv:()=>m});var t=a(95155),r=a(12115),l=a(56685),i=a(24033),n=a(12108),c=a(5917),d=a(64269);let o=l.bL;l.YJ;let m=l.WT,x=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=l.l9.displayName;let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});u.displayName=l.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let j=r.forwardRef((e,s)=>{let{className:a,children:r,position:i="popper",...n}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,t.jsx)(u,{}),(0,t.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(h,{})]})})});j.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let y=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(l.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:r})]})});y.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},11647:(e,s,a)=>{"use strict";a.d(s,{E:()=>n});var t=a(95155);a(12115);var r=a(83101),l=a(64269);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(i({variant:a}),s),...r})}},13406:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>n});var t=a(95155),r=a(12115),l=a(25667),i=a(64269);let n=l.bL,c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});c.displayName=l.B8.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});d.displayName=l.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});o.displayName=l.UC.displayName},45617:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>$});var t=a(95155),r=a(12115),l=a(86948),i=a(13406),n=a(3998),c=a(65142),d=a(76444),o=a(11186),m=a(11647),x=a(86259),u=a(57774);function h(){let[e,s]=(0,r.useState)({currentAnalysis:null,analysisHistory:[],isLoading:!1,error:null}),a=(0,r.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";s(e=>({...e,isLoading:!0,error:null}));try{let r=await fetch("/api/analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repositoryUrl:e,analysisType:a,priority:t})}),l=await r.json();if(!r.ok)throw Error(l.error||"Failed to submit analysis");let i={id:l.analysisId,repositoryUrl:e,repositoryName:e.split("/").pop()||"Unknown Repository",analysisDate:new Date,status:l.status,metadata:{analysisType:a,priority:t,estimatedTime:l.estimatedTime}};return s(e=>({...e,isLoading:!1,currentAnalysis:i,analysisHistory:[i,...e.analysisHistory],error:null})),i}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,isLoading:!1,error:e})),a}},[]),t=(0,r.useCallback)(async e=>{s(e=>({...e,isLoading:!0,error:null}));try{let a=await fetch("/api/analysis/".concat(e)),t=await a.json();if(!a.ok)throw Error(t.error||"Failed to retrieve analysis");let r={id:t.analysis.id,repositoryUrl:t.analysis.repositoryUrl,repositoryName:t.analysis.repositoryName,analysisDate:new Date(t.analysis.analysisDate),status:t.analysis.status,creditsCost:t.analysis.creditsCost,results:t.analysis.results,metadata:t.analysis.metadata};return s(e=>({...e,isLoading:!1,currentAnalysis:r,error:null})),r}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,isLoading:!1,error:e})),a}},[]),l=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=arguments.length>2?arguments[2]:void 0;s(e=>({...e,isLoading:!0,error:null}));try{let r=new URLSearchParams({page:e.toString(),limit:a.toString()});t&&r.append("status",t);let l=await fetch("/api/analysis?".concat(r)),i=await l.json();if(!l.ok)throw Error(i.success?"Unknown error":"Failed to load analysis history");let n=i.analyses.map(e=>({...e,analysisDate:new Date(e.analysisDate)}));return s(e=>({...e,isLoading:!1,analysisHistory:n,error:null})),i}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,isLoading:!1,error:e})),a}},[]),i=(0,r.useCallback)(async e=>{try{let a=await fetch("/api/analysis/".concat(e),{method:"DELETE"}),t=await a.json();if(!a.ok)throw Error(t.error||"Failed to delete analysis");return s(s=>{var a;return{...s,analysisHistory:s.analysisHistory.filter(s=>s.id!==e),currentAnalysis:(null==(a=s.currentAnalysis)?void 0:a.id)===e?null:s.currentAnalysis}}),!0}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,error:e})),a}},[]),n=(0,r.useCallback)(async e=>{try{let a=await fetch("/api/analysis/".concat(e,"/status")),t=await a.json();if(!a.ok)throw Error(t.error||"Failed to get analysis status");let r={id:t.analysis.id,repositoryUrl:t.analysis.repositoryUrl,repositoryName:t.analysis.repositoryName,analysisDate:new Date(t.analysis.analysisDate),status:t.analysis.status,creditsCost:t.analysis.creditsCost,results:t.analysis.results,metadata:t.analysis.metadata};return s(s=>{var a;return{...s,currentAnalysis:(null==(a=s.currentAnalysis)?void 0:a.id)===e?r:s.currentAnalysis,analysisHistory:s.analysisHistory.map(s=>s.id===e?r:s)}}),r}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,error:e})),a}},[]),c=(0,r.useCallback)(()=>{s(e=>({...e,error:null}))},[]),d=(0,r.useCallback)(()=>{s(e=>({...e,currentAnalysis:null}))},[]);return(0,r.useEffect)(()=>{if(!e.currentAnalysis||!["PENDING","PROCESSING"].includes(e.currentAnalysis.status))return;let s=setInterval(()=>{n(e.currentAnalysis.id).catch(console.error)},5e3);return()=>clearInterval(s)},[e.currentAnalysis,n]),{...e,submitAnalysis:a,getAnalysisById:t,refreshHistory:l,deleteAnalysis:i,updateAnalysisStatus:n,clearError:c,clearCurrentAnalysis:d}}var j=a(90839),y=a(94684),p=a(35299),f=a(78874),g=a(42529),N=a(39332),v=a(99708),w=a(35795),b=a(56154),A=a(91761),C=a(52056);function E(e){let{onAnalysisStarted:s}=e,[a,i]=(0,r.useState)(""),[E,S]=(0,r.useState)("full"),[k,P]=(0,r.useState)("normal"),[L,R]=(0,r.useState)(null),[I,D]=(0,r.useState)(!1),[T,F]=(0,r.useState)(null),{validateRepository:O,validationLoading:U,validationError:Z}=(0,u.q)(),{submitAnalysis:B,isLoading:M,error:z}=h(),{balance:W,refreshBalance:G}=(0,j.J)(),V=async()=>{if(!a.trim())return;let e=await O(a.trim());R(e),D(!0),e.isValid&&await J()},J=async()=>{if(a.trim())try{let e=await fetch("/api/analysis/estimate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repositoryUrl:a.trim()})}),s=await e.json();e.ok&&F(s.estimate)}catch(e){console.error("Failed to get estimate:",e)}},H=async()=>{if((null==L?void 0:L.isValid)&&T)try{await B(a.trim(),E,k),await G(),s&&s()}catch(e){}},$=a.trim().length>0,q=!T||W>=T.creditsCost,X=(null==L?void 0:L.isValid)&&T&&q&&!M;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-5 w-5"}),"Repository Information"]}),(0,t.jsx)(l.BT,{children:"Enter a GitHub or GitLab repository URL to analyze against web platform baseline standards"})]}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{htmlFor:"repository-url",children:"Repository URL"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.p,{id:"repository-url",placeholder:"https://github.com/username/repository",value:a,onChange:e=>{i(e.target.value),R(null),D(!1),F(null)},className:"flex-1"}),(0,t.jsx)(n.$,{onClick:V,disabled:!($&&!U),variant:"outline",children:U?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):"Validate"})]})]}),Z&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-md",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),Z]}),I&&L&&(0,t.jsxs)("div",{className:"space-y-3",children:[L.isValid?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600 bg-green-50 p-3 rounded-md",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"}),"Repository is valid and accessible"]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-md",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),L.error]}),L.repositoryInfo&&(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"Repository Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"font-medium",children:[L.repositoryInfo.owner,"/",L.repositoryInfo.name]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:L.repositoryInfo.branch||"main"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[L.repositoryInfo.isPrivate?(0,t.jsx)(v.A,{className:"h-4 w-4 text-red-500"}):(0,t.jsx)(w.A,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)(m.E,{variant:L.repositoryInfo.isPrivate?"destructive":"secondary",children:L.repositoryInfo.isPrivate?"Private":"Public"})]}),L.repositoryInfo.size&&(0,t.jsxs)("div",{className:"text-gray-600",children:["Size: ",Math.round(L.repositoryInfo.size/1024)," KB"]})]})]})]})]})]}),(null==L?void 0:L.isValid)&&(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-5 w-5"}),"Analysis Configuration"]}),(0,t.jsx)(l.BT,{children:"Configure the type and priority of your analysis"})]}),(0,t.jsx)(l.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{htmlFor:"analysis-type",children:"Analysis Type"}),(0,t.jsxs)(o.l6,{value:E,onValueChange:e=>S(e),children:[(0,t.jsx)(o.bq,{children:(0,t.jsx)(o.yv,{})}),(0,t.jsxs)(o.gC,{children:[(0,t.jsx)(o.eb,{value:"compatibility",children:"Compatibility Check"}),(0,t.jsx)(o.eb,{value:"recommendations",children:"Recommendations Only"}),(0,t.jsx)(o.eb,{value:"full",children:"Full Analysis"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:(e=>{switch(e){case"compatibility":return"Quick analysis focused on browser compatibility and baseline feature support";case"recommendations":return"Focused analysis that provides specific, actionable recommendations for improvement";case"full":return"Comprehensive analysis including compatibility, recommendations, and detailed insights";default:return""}})(E)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{htmlFor:"priority",children:"Processing Priority"}),(0,t.jsxs)(o.l6,{value:k,onValueChange:e=>P(e),children:[(0,t.jsx)(o.bq,{children:(0,t.jsx)(o.yv,{})}),(0,t.jsxs)(o.gC,{children:[(0,t.jsx)(o.eb,{value:"low",children:"Low Priority"}),(0,t.jsx)(o.eb,{value:"normal",children:"Normal Priority"}),(0,t.jsx)(o.eb,{value:"high",children:"High Priority"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:(e=>{switch(e){case"low":return"Standard processing time (5-10 minutes)";case"normal":return"Normal processing time (2-5 minutes)";case"high":return"Priority processing (1-2 minutes)";default:return""}})(k)})]})]})})]}),T&&(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(A.A,{className:"h-5 w-5"}),"Cost Estimate"]})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-sm text-gray-600",children:"Estimated Files"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:T.estimatedMetadata.fileCount})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-sm text-gray-600",children:"Estimated Size"}),(0,t.jsxs)("p",{className:"text-lg font-medium",children:[Math.round(T.estimatedMetadata.totalSize/1024)," KB"]})]})]}),(0,t.jsx)(x.w,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-sm text-gray-600",children:"Analysis Cost"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[T.creditsCost," credits"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)(d.J,{className:"text-sm text-gray-600",children:"Your Balance"}),(0,t.jsxs)("p",{className:"text-lg font-medium ".concat(q?"text-green-600":"text-red-600"),children:[W," credits"]})]})]}),!q&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md text-yellow-700",children:[(0,t.jsx)(C.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"text-sm",children:["Insufficient credits. You need ",T.creditsCost-W," more credits to run this analysis."]})]})]})]}),z&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-md",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),z]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(n.$,{onClick:H,disabled:!X,size:"lg",className:"min-w-40",children:M?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin mr-2"}),"Starting Analysis..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Start Analysis"]})})}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-1 bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("p",{className:"font-medium",children:"Analysis Information:"}),(0,t.jsx)("p",{children:"• Analysis uses AI to evaluate your code against web platform baseline standards"}),(0,t.jsx)("p",{children:"• Processing time varies based on repository size and selected priority"}),(0,t.jsx)("p",{children:"• Credits are deducted only when analysis starts successfully"}),(0,t.jsx)("p",{children:"• You can track progress and view results in real-time"})]})]})}var S=a(80991),k=a(26983),P=a(89559),L=a(6132),R=a(80534),I=a(39324);function D(e){var s,a,i,c,d;let{onCompleted:o}=e,[x,u]=(0,r.useState)(0),[j,y]=(0,r.useState)(""),[v]=(0,r.useState)(new Date),[w,A]=(0,r.useState)(0),{currentAnalysis:C,updateAnalysisStatus:E,isLoading:D,error:T}=h();(0,r.useEffect)(()=>{let e=setInterval(()=>{A(Math.floor((new Date().getTime()-v.getTime())/1e3))},1e3);return()=>clearInterval(e)},[v]),(0,r.useEffect)(()=>{if(C)switch(C.status){case"PENDING":u(10),y("Queued for processing");break;case"PROCESSING":u(50),y("Analyzing repository content");break;case"COMPLETED":u(100),y("Analysis completed"),o&&o();break;case"FAILED":u(0),y("Analysis failed")}},[C,o]);let F=async()=>{C&&await E(C.id)};return C?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{if(!C)return(0,t.jsx)(p.A,{className:"h-5 w-5 animate-spin"});switch(C.status){case"PENDING":return(0,t.jsx)(k.A,{className:"h-5 w-5 text-yellow-500"});case"PROCESSING":return(0,t.jsx)(p.A,{className:"h-5 w-5 animate-spin text-blue-500"});case"COMPLETED":return(0,t.jsx)(g.A,{className:"h-5 w-5 text-green-500"});case"FAILED":return(0,t.jsx)(f.A,{className:"h-5 w-5 text-red-500"});default:return(0,t.jsx)(p.A,{className:"h-5 w-5 animate-spin"})}})(),(0,t.jsx)(l.ZB,{children:"Analysis Progress"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{if(!C)return(0,t.jsx)(m.E,{variant:"secondary",children:"Loading..."});switch(C.status){case"PENDING":return(0,t.jsx)(m.E,{variant:"secondary",children:"Pending"});case"PROCESSING":return(0,t.jsx)(m.E,{variant:"default",children:"Processing"});case"COMPLETED":return(0,t.jsx)(m.E,{variant:"default",className:"bg-green-500",children:"Completed"});case"FAILED":return(0,t.jsx)(m.E,{variant:"destructive",children:"Failed"});default:return(0,t.jsx)(m.E,{variant:"secondary",children:"Unknown"})}})(),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:F,disabled:D,children:(0,t.jsx)(P.A,{className:"h-4 w-4 ".concat(D?"animate-spin":"")})})]})]}),(0,t.jsx)(l.BT,{children:C.repositoryUrl})]}),(0,t.jsxs)(l.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:j}),(0,t.jsxs)("span",{children:[x,"%"]})]}),(0,t.jsx)(S.k,{value:x,className:"w-full"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Repository"}),(0,t.jsx)("div",{className:"font-medium truncate",children:C.repositoryName})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Type"}),(0,t.jsx)("div",{className:"font-medium capitalize",children:(null==(s=C.metadata)?void 0:s.analysisType)||"Full"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Priority"}),(0,t.jsx)("div",{className:"font-medium capitalize",children:(null==(a=C.metadata)?void 0:a.priority)||"Normal"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Elapsed Time"}),(0,t.jsx)("div",{className:"font-medium",children:(e=>{if(e<60)return"".concat(e,"s");let s=Math.floor(e/60);return"".concat(s,"m ").concat(e%60,"s")})(w)})]})]}),"PENDING"===C.status&&(0,t.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-yellow-700",children:[(0,t.jsx)(k.A,{className:"h-4 w-4"}),"Analysis Queued"]}),(0,t.jsxs)("div",{className:"text-sm text-yellow-600 mt-1",children:["Your analysis is in the queue and will start processing shortly. Estimated wait time: ",(null==(i=C.metadata)?void 0:i.estimatedTime)||"2-5 minutes"]})]}),"PROCESSING"===C.status&&(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-blue-700",children:[(0,t.jsx)(b.A,{className:"h-4 w-4"}),"AI Analysis in Progress"]}),(0,t.jsx)("div",{className:"text-sm text-blue-600 mt-1",children:"Our AI is analyzing your repository against web platform baseline standards. This process typically takes 2-5 minutes depending on repository size."})]}),"COMPLETED"===C.status&&(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-green-700",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"}),"Analysis Completed Successfully"]}),(0,t.jsxs)("div",{className:"text-sm text-green-600 mt-1",children:["Your repository analysis is complete!",C.creditsCost&&" Credits used: ".concat(C.creditsCost)]})]}),"FAILED"===C.status&&(0,t.jsxs)("div",{className:"bg-red-50 p-4 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-red-700",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),"Analysis Failed"]}),(0,t.jsx)("div",{className:"text-sm text-red-600 mt-1",children:(null==(c=C.metadata)?void 0:c.error)||"The analysis encountered an error and could not be completed."})]}),T&&(0,t.jsxs)("div",{className:"bg-red-50 p-4 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-red-700",children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),"Error"]}),(0,t.jsx)("div",{className:"text-sm text-red-600 mt-1",children:T})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-5 w-5"}),"Analysis Steps"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 ".concat(x>=10?"text-green-600":"text-gray-400"),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(x>=10?"bg-green-100":"bg-gray-100"),children:x>=10?(0,t.jsx)(g.A,{className:"h-4 w-4"}):(0,t.jsx)("span",{className:"text-sm font-medium",children:"1"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Repository Validation"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Validate repository access and extract metadata"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 ".concat(x>=30?"text-green-600":x>=10?"text-blue-600":"text-gray-400"),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(x>=30?"bg-green-100":x>=10?"bg-blue-100":"bg-gray-100"),children:x>=30?(0,t.jsx)(g.A,{className:"h-4 w-4"}):x>=10?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)("span",{className:"text-sm font-medium",children:"2"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Content Processing"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Extract and process repository files"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 ".concat(x>=70?"text-green-600":x>=30?"text-blue-600":"text-gray-400"),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(x>=70?"bg-green-100":x>=30?"bg-blue-100":"bg-gray-100"),children:x>=70?(0,t.jsx)(g.A,{className:"h-4 w-4"}):x>=30?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)("span",{className:"text-sm font-medium",children:"3"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"AI Analysis"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Analyze code against baseline standards using AI"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 ".concat(x>=100?"text-green-600":x>=70?"text-blue-600":"text-gray-400"),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(x>=100?"bg-green-100":x>=70?"bg-blue-100":"bg-gray-100"),children:x>=100?(0,t.jsx)(g.A,{className:"h-4 w-4"}):x>=70?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)("span",{className:"text-sm font-medium",children:"4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Results Generation"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Generate recommendations and compliance report"})]})]})]})})]}),"COMPLETED"===C.status&&(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(R.A,{className:"h-5 w-5"}),"Next Steps"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(n.$,{onClick:o,className:"flex-1",children:[(0,t.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"View Results"]})})})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-1 bg-gray-50 p-3 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.A,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:["Started: ",C.analysisDate.toLocaleString()]})]}),(0,t.jsxs)("div",{children:["Analysis ID: ",C.id]}),(null==(d=C.metadata)?void 0:d.estimatedTime)&&(0,t.jsxs)("div",{children:["Estimated completion: ",C.metadata.estimatedTime]})]})]}):(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(p.A,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading analysis details..."})]})})})}var T=a(39867),F=a(17181),O=a(30814),U=a(93499),Z=a(1524);function B(e){var s;let{analysisId:a}=e,[c,d]=(0,r.useState)(null),[o,x]=(0,r.useState)(!0),[u,j]=(0,r.useState)(null),{currentAnalysis:y,getAnalysisById:p}=h();(0,r.useEffect)(()=>{f()},[f]);let f=(0,r.useCallback)(async()=>{try{x(!0),j(null);let e=await p(a);(null==e?void 0:e.results)?d(e.results):j("No results available for this analysis")}catch(e){j(e instanceof Error?e.message:"Failed to load results")}finally{x(!1)}},[a,p]),N=async e=>{if(y&&c)try{let s={analysis:y,results:c,generatedAt:new Date().toISOString()},a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download="".concat(y.repositoryName,"-analysis-report.").concat(e),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}catch(e){console.error("Failed to download report:",e)}},v=async()=>{if(y)try{let e="".concat(window.location.origin,"/repository-analysis/shared/").concat(a);navigator.share?await navigator.share({title:"Analysis Results: ".concat(y.repositoryName),text:"Check out the baseline analysis results for ".concat(y.repositoryName),url:e}):(await navigator.clipboard.writeText(e),alert("Share link copied to clipboard!"))}catch(e){console.error("Failed to share results:",e)}},w=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600";return o?(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(P.A,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading analysis results..."})]})})}):u?(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(L.A,{className:"h-8 w-8 mx-auto text-red-400"}),(0,t.jsx)("p",{className:"text-red-600",children:u}),(0,t.jsxs)(n.$,{onClick:f,variant:"outline",children:[(0,t.jsx)(P.A,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})}):c&&y?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"h-5 w-5 text-green-600"}),"Analysis Results"]}),(0,t.jsxs)(l.BT,{children:[y.repositoryName," • Completed ",y.analysisDate.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(n.$,{onClick:()=>N("json"),variant:"outline",size:"sm",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Download"]}),(0,t.jsxs)(n.$,{onClick:v,variant:"outline",size:"sm",children:[(0,t.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Share"]})]})]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold ".concat(w(c.complianceScore)),children:c.complianceScore}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Compliance Score"}),(0,t.jsx)("div",{className:"text-xs font-medium ".concat(w(c.complianceScore)),children:(s=c.complianceScore)>=80?"Excellent":s>=60?"Good":s>=40?"Fair":"Needs Improvement"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.recommendations.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Recommendations"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:c.baselineMatches.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Baseline Features"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:c.issues.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Issues Found"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:y.creditsCost||0}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Credits Used"})]})]})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(O.A,{className:"h-5 w-5"}),"Baseline Compliance Overview"]})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Overall Compliance Score"}),(0,t.jsxs)("span",{className:w(c.complianceScore),children:[c.complianceScore,"/100"]})]}),(0,t.jsx)(S.k,{value:c.complianceScore,className:"w-full"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:c.baselineMatches.filter(e=>"baseline"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Baseline Features"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-yellow-600",children:c.baselineMatches.filter(e=>"limited"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Limited Support"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-red-600",children:c.baselineMatches.filter(e=>"not-baseline"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Not Baseline"})]})]})]})]}),(0,t.jsxs)(i.tU,{defaultValue:"recommendations",className:"w-full",children:[(0,t.jsxs)(i.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsxs)(i.Xi,{value:"recommendations",children:["Recommendations (",c.recommendations.length,")"]}),(0,t.jsxs)(i.Xi,{value:"features",children:["Baseline Features (",c.baselineMatches.length,")"]}),(0,t.jsxs)(i.Xi,{value:"issues",children:["Issues (",c.issues.length,")"]})]}),(0,t.jsx)(i.av,{value:"recommendations",className:"space-y-4",children:c.recommendations.length>0?c.recommendations.map((e,s)=>(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.ZB,{className:"text-lg",children:e.title}),(0,t.jsx)(l.BT,{children:e.category})]}),(0,t.jsxs)(m.E,{variant:(e=>{switch(e){case"high":return"destructive";case"medium":return"default";default:return"secondary"}})(e.priority),children:[e.priority," priority"]})]})}),(0,t.jsxs)(l.Wu,{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-gray-700",children:e.description}),e.actionItems&&e.actionItems.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Action Items:"}),(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:e.actionItems.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}),e.resources&&e.resources.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Resources:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.resources.map((e,s)=>(0,t.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:underline",children:[e,(0,t.jsx)(U.A,{className:"h-3 w-3"})]},s))})]})]})]},e.id||s)):(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(Z.A,{className:"h-8 w-8 mx-auto text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No recommendations available"})]})})})}),(0,t.jsx)(i.av,{value:"features",className:"space-y-4",children:c.baselineMatches.length>0?(0,t.jsx)("div",{className:"grid gap-3",children:c.baselineMatches.map((e,s)=>(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:e.feature}),e.description&&(0,t.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.documentation&&(0,t.jsxs)("a",{href:e.documentation,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:underline mt-1",children:["Documentation",(0,t.jsx)(U.A,{className:"h-3 w-3"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.E,{variant:(e=>{switch(e){case"baseline":return"default";case"limited":default:return"secondary";case"not-baseline":return"destructive"}})(e.status),children:e.status}),e.confidence&&(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(100*e.confidence),"%"]})]})]})})},s))}):(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(O.A,{className:"h-8 w-8 mx-auto text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No baseline features detected"})]})})})}),(0,t.jsx)(i.av,{value:"issues",className:"space-y-4",children:c.issues.length>0?c.issues.map((e,s)=>(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(e=>{switch(e){case"error":return(0,t.jsx)(L.A,{className:"h-4 w-4 text-red-500"});case"warning":return(0,t.jsx)(L.A,{className:"h-4 w-4 text-yellow-500"});case"info":return(0,t.jsx)(g.A,{className:"h-4 w-4 text-blue-500"});default:return(0,t.jsx)(L.A,{className:"h-4 w-4 text-gray-500"})}})(e.type),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,t.jsx)(m.E,{variant:"error"===e.type?"destructive":"secondary",children:e.type})]}),e.file&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["File: ",e.file,e.line&&":".concat(e.line)]}),e.suggestion&&(0,t.jsxs)("div",{className:"text-sm text-blue-600 bg-blue-50 p-2 rounded mt-2",children:[(0,t.jsx)("strong",{children:"Suggestion:"})," ",e.suggestion]})]})]})})},e.id||s)):(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(g.A,{className:"h-8 w-8 mx-auto text-green-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No issues found"})]})})})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-5 w-5"}),"Analysis Details"]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-gray-600",children:"AI Provider"}),(0,t.jsx)("div",{className:"font-medium",children:c.provider||"Unknown"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-gray-600",children:"Model"}),(0,t.jsx)("div",{className:"font-medium",children:c.model||"Unknown"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-gray-600",children:"Processing Time"}),(0,t.jsx)("div",{className:"font-medium",children:c.processingTime?"".concat((c.processingTime/1e3).toFixed(1),"s"):"Unknown"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-gray-600",children:"Tokens Used"}),(0,t.jsx)("div",{className:"font-medium",children:c.tokensUsed||"Unknown"})]})]})})]})]}):(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(R.A,{className:"h-8 w-8 mx-auto text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No results available"})]})})})}var M=a(54485),z=a(86651),W=a(66955),G=a(16485),V=a(57828),J=a(71360);function H(e){let{analyses:s,isLoading:a,error:i,onRefresh:d,onAnalysisSelect:x}=e,[u,h]=(0,r.useState)(""),[j,y]=(0,r.useState)("all"),[v,w]=(0,r.useState)("date"),b=s.filter(e=>{let s=e.repositoryName.toLowerCase().includes(u.toLowerCase())||e.repositoryUrl.toLowerCase().includes(u.toLowerCase()),a="all"===j||e.status===j;return s&&a}).sort((e,s)=>{switch(v){case"name":return e.repositoryName.localeCompare(s.repositoryName);case"status":return e.status.localeCompare(s.status);default:return new Date(s.analysisDate).getTime()-new Date(e.analysisDate).getTime()}}),A=async(e,s)=>{if(s.stopPropagation(),confirm("Are you sure you want to delete this analysis? This action cannot be undone."))try{let s=await fetch("/api/analysis/".concat(e),{method:"DELETE"});if(s.ok)d();else{let e=await s.json();alert("Failed to delete analysis: ".concat(e.error))}}catch(e){alert("Failed to delete analysis. Please try again.")}},C=async(e,s)=>{if(s.stopPropagation(),"COMPLETED"!==e.status||!e.results)return void alert("Analysis must be completed to download results.");try{let s={analysis:e,results:e.results,generatedAt:new Date().toISOString()},a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download="".concat(e.repositoryName,"-analysis-").concat(e.analysisDate.toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}catch(e){alert("Failed to download analysis results.")}},E=e=>{var s;return(null==(s=e.results)?void 0:s.complianceScore)||0};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"h-5 w-5"}),"Analysis History"]}),(0,t.jsx)(l.BT,{children:"View and manage your repository analysis history"})]}),(0,t.jsxs)(n.$,{onClick:d,variant:"outline",disabled:a,children:[(0,t.jsx)(P.A,{className:"h-4 w-4 mr-2 ".concat(a?"animate-spin":"")}),"Refresh"]})]})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(z.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(c.p,{placeholder:"Search repositories...",value:u,onChange:e=>h(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(o.l6,{value:j,onValueChange:y,children:[(0,t.jsxs)(o.bq,{className:"w-40",children:[(0,t.jsx)(W.A,{className:"h-4 w-4 mr-2"}),(0,t.jsx)(o.yv,{})]}),(0,t.jsxs)(o.gC,{children:[(0,t.jsx)(o.eb,{value:"all",children:"All Status"}),(0,t.jsx)(o.eb,{value:"COMPLETED",children:"Completed"}),(0,t.jsx)(o.eb,{value:"PROCESSING",children:"Processing"}),(0,t.jsx)(o.eb,{value:"PENDING",children:"Pending"}),(0,t.jsx)(o.eb,{value:"FAILED",children:"Failed"})]})]}),(0,t.jsxs)(o.l6,{value:v,onValueChange:e=>w(e),children:[(0,t.jsx)(o.bq,{className:"w-32",children:(0,t.jsx)(o.yv,{})}),(0,t.jsxs)(o.gC,{children:[(0,t.jsx)(o.eb,{value:"date",children:"Date"}),(0,t.jsx)(o.eb,{value:"name",children:"Name"}),(0,t.jsx)(o.eb,{value:"status",children:"Status"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total Analyses"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.filter(e=>"COMPLETED"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:s.filter(e=>["PENDING","PROCESSING"].includes(e.status)).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"In Progress"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s.filter(e=>"FAILED"===e.status).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Failed"})]})]})]})]}),i&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-md",children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),i]}),a?(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(P.A,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading analysis history..."})]})})}):0===b.length?(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(M.A,{className:"h-8 w-8 mx-auto text-gray-400"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-600",children:0===s.length?"No Analyses Yet":"No Matching Analyses"}),(0,t.jsx)("p",{className:"text-gray-500",children:0===s.length?"Start your first repository analysis to see results here.":"Try adjusting your search or filter criteria."})]})})}):(0,t.jsx)("div",{className:"space-y-4",children:b.map(e=>{var s,a,r,i;let c;return(0,t.jsx)(l.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>x(e),children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{switch(e){case"PENDING":return(0,t.jsx)(k.A,{className:"h-4 w-4 text-yellow-500"});case"PROCESSING":return(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin text-blue-500"});case"COMPLETED":return(0,t.jsx)(g.A,{className:"h-4 w-4 text-green-500"});case"FAILED":return(0,t.jsx)(f.A,{className:"h-4 w-4 text-red-500"});default:return(0,t.jsx)(L.A,{className:"h-4 w-4 text-gray-500"})}})(e.status),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-lg",children:e.repositoryName}),(0,t.jsx)("p",{className:"text-sm text-gray-600 truncate max-w-md",children:e.repositoryUrl})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(G.A,{className:"h-4 w-4"}),(c=e.analysisDate,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(c))]}),(null==(s=e.metadata)?void 0:s.analysisType)&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(N.A,{className:"h-4 w-4"}),e.metadata.analysisType]}),e.creditsCost&&(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsxs)("span",{children:[e.creditsCost," credits"]})})]}),"COMPLETED"===e.status&&e.results&&(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(R.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"font-medium ".concat((i=E(e))>=80?"text-green-600":i>=60?"text-yellow-600":"text-red-600"),children:["Score: ",E(e)]})]}),(0,t.jsxs)("div",{children:[(null==(a=e.results.recommendations)?void 0:a.length)||0," recommendations"]}),(0,t.jsxs)("div",{children:[(null==(r=e.results.issues)?void 0:r.length)||0," issues"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"PENDING":return(0,t.jsx)(m.E,{variant:"secondary",children:"Pending"});case"PROCESSING":return(0,t.jsx)(m.E,{variant:"default",children:"Processing"});case"COMPLETED":return(0,t.jsx)(m.E,{variant:"default",className:"bg-green-500",children:"Completed"});case"FAILED":return(0,t.jsx)(m.E,{variant:"destructive",children:"Failed"});default:return(0,t.jsx)(m.E,{variant:"secondary",children:"Unknown"})}})(e.status),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["COMPLETED"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:s=>C(e,s),children:(0,t.jsx)(T.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),x(e)},children:(0,t.jsx)(V.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:s=>A(e.id,s),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(J.A,{className:"h-4 w-4"})})]})]})]})})},e.id)})}),b.length>0&&(0,t.jsxs)("div",{className:"text-center text-sm text-gray-500",children:["Showing ",b.length," of ",s.length," analyses"]})]})}function $(){let[e,s]=(0,r.useState)("analyze"),{currentAnalysis:a,analysisHistory:n,isLoading:c,error:d,refreshHistory:o}=h();return(0,r.useEffect)(()=>{o()},[o]),(0,r.useEffect)(()=>{(null==a?void 0:a.status)==="COMPLETED"&&s("results")},[null==a?void 0:a.status]),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"Repository Analysis"}),(0,t.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Analyze your code repositories against web platform baseline standards. Get detailed insights, compliance scores, and actionable recommendations."})]}),(0,t.jsxs)(i.tU,{value:e,onValueChange:s,className:"w-full",children:[(0,t.jsxs)(i.j7,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(i.Xi,{value:"analyze",className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-4 w-4"}),"Analyze"]}),(0,t.jsxs)(i.Xi,{value:"progress",className:"flex items-center gap-2",disabled:!a,children:[(0,t.jsx)(N.A,{className:"h-4 w-4"}),"Progress"]}),(0,t.jsxs)(i.Xi,{value:"results",className:"flex items-center gap-2",disabled:!a||"COMPLETED"!==a.status,children:[(0,t.jsx)(R.A,{className:"h-4 w-4"}),"Results"]}),(0,t.jsxs)(i.Xi,{value:"history",className:"flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"h-4 w-4"}),"History"]})]}),(0,t.jsx)(i.av,{value:"analyze",className:"space-y-6",children:(0,t.jsx)(E,{onAnalysisStarted:()=>s("progress")})}),(0,t.jsx)(i.av,{value:"progress",className:"space-y-6",children:a?(0,t.jsx)(D,{analysisId:a.id,onCompleted:()=>s("results")}):(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(N.A,{className:"h-12 w-12 mx-auto text-gray-400"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-600",children:"No Active Analysis"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Start an analysis to track its progress here."})]})})})}),(0,t.jsx)(i.av,{value:"results",className:"space-y-6",children:(null==a?void 0:a.status)==="COMPLETED"?(0,t.jsx)(B,{analysisId:a.id}):(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(R.A,{className:"h-12 w-12 mx-auto text-gray-400"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-600",children:"No Results Available"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Complete an analysis to view detailed results here."})]})})})}),(0,t.jsx)(i.av,{value:"history",className:"space-y-6",children:(0,t.jsx)(H,{analyses:n,isLoading:c,error:d,onRefresh:o,onAnalysisSelect:e=>{"COMPLETED"===e.status&&s("results")}})})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{className:"text-center",children:(0,t.jsx)(l.ZB,{className:"text-lg",children:"Total Analyses"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-3xl font-bold text-center text-blue-600",children:n.length})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{className:"text-center",children:(0,t.jsx)(l.ZB,{className:"text-lg",children:"Completed"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-3xl font-bold text-center text-green-600",children:n.filter(e=>"COMPLETED"===e.status).length})})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{className:"text-center",children:(0,t.jsx)(l.ZB,{className:"text-lg",children:"In Progress"})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("div",{className:"text-3xl font-bold text-center text-orange-600",children:n.filter(e=>["PENDING","PROCESSING"].includes(e.status)).length})})]})]})]})}},57774:(e,s,a)=>{"use strict";a.d(s,{q:()=>r});var t=a(12115);function r(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(null),[l,i]=(0,t.useState)(!1),[n,c]=(0,t.useState)(null),[d,o]=(0,t.useState)(!1),[m,x]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[j,y]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[g,N]=(0,t.useState)(!1),v=(0,t.useCallback)(async e=>{s(!0),r(null);try{let s=await fetch("/api/repositories/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),a=await s.json();if(!a.success)throw Error(a.error||"Validation failed");return a.data}catch(s){let e=s instanceof Error?s.message:"Validation failed";return r(e),{isValid:!1,error:e}}finally{s(!1)}},[]),w=(0,t.useCallback)(async e=>{i(!0),c(null);try{let s=await fetch("/api/repositories/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),a=await s.json();if(!a.success)throw Error(a.error||"Processing failed");return a.data.jobId}catch(e){return c(e instanceof Error?e.message:"Processing failed"),null}finally{i(!1)}},[]),b=(0,t.useCallback)(async e=>{o(!0),x(null);try{let s=await fetch("/api/repositories/status/".concat(e)),a=await s.json();if(!a.success)throw Error(a.error||"Failed to get job status");return a.data}catch(e){return x(e instanceof Error?e.message:"Failed to get job status"),null}finally{o(!1)}},[]),A=(0,t.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";h(!0),y(null);try{let a="/api/repositories/result/".concat(e).concat("llm"===s?"?format=llm":""),t=await fetch(a);if("llm"===s){if(!t.ok)throw Error("Failed to get LLM-formatted result");return await t.text()}{let e=await t.json();if(!e.success)throw Error(e.error||"Failed to get job result");return e.data}}catch(e){return y(e instanceof Error?e.message:"Failed to get job result"),null}finally{h(!1)}},[]),C=(0,t.useCallback)((e,s)=>{p&&clearInterval(p),N(!0);let a=async()=>{try{let a=await b(e);(null==a?void 0:a.job)&&(s(a.job),("completed"===a.job.status||"failed"===a.job.status)&&E())}catch(e){console.error("Polling error:",e)}};a(),f(setInterval(a,2e3))},[p,b]),E=(0,t.useCallback)(()=>{p&&(clearInterval(p),f(null)),N(!1)},[p]);return(0,t.useEffect)(()=>()=>{p&&clearInterval(p)},[p]),{validateRepository:v,validationLoading:e,validationError:a,processRepository:w,processingLoading:l,processingError:n,getJobStatus:b,jobStatusLoading:d,jobStatusError:m,getJobResult:A,resultLoading:u,resultError:j,startPolling:C,stopPolling:E,isPolling:g}}},64269:(e,s,a)=>{"use strict";a.d(s,{cn:()=>l});var t=a(2821),r=a(75889);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.QP)((0,t.$)(s))}},65142:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(95155),r=a(12115),l=a(64269);let i=r.forwardRef((e,s)=>{let{className:a,type:r,...i}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})});i.displayName="Input"},76444:(e,s,a)=>{"use strict";a.d(s,{J:()=>d});var t=a(95155),r=a(12115),l=a(10489),i=a(83101),n=a(64269);let c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.b,{ref:s,className:(0,n.cn)(c(),a),...r})});d.displayName=l.b.displayName},80503:(e,s,a)=>{Promise.resolve().then(a.bind(a,45617))},80991:(e,s,a)=>{"use strict";a.d(s,{k:()=>n});var t=a(95155),r=a(12115),l=a(9484),i=a(64269);let n=r.forwardRef((e,s)=>{let{className:a,value:r,...n}=e;return(0,t.jsx)(l.bL,{ref:s,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...n,children:(0,t.jsx)(l.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});n.displayName=l.bL.displayName},86259:(e,s,a)=>{"use strict";a.d(s,{w:()=>n});var t=a(95155),r=a(12115),l=a(57268),i=a(64269);let n=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...c}=e;return(0,t.jsx)(l.b,{ref:s,decorative:n,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...c})});n.displayName=l.b.displayName},86948:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>n});var t=a(95155),r=a(12115),l=a(64269);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},90839:(e,s,a)=>{"use strict";a.d(s,{J:()=>r});var t=a(12115);function r(){let[e,s]=(0,t.useState)({balance:0,isLoading:!1,error:null,transactions:[]}),a=(0,t.useCallback)(async()=>{s(e=>({...e,isLoading:!0,error:null}));try{let e=await fetch("/api/credits"),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to fetch credit balance");return s(e=>({...e,isLoading:!1,balance:a.balance,error:null})),a.balance}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,isLoading:!1,error:e})),a}},[]),r=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;s(e=>({...e,isLoading:!0,error:null}));try{let t=new URLSearchParams({page:e.toString(),limit:a.toString()}),r=await fetch("/api/credits/history?".concat(t)),l=await r.json();if(!r.ok)throw Error(l.error||"Failed to fetch transaction history");let i=l.transactions.map(e=>({...e,createdAt:new Date(e.createdAt)}));return s(e=>({...e,isLoading:!1,transactions:i,error:null})),l}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,isLoading:!1,error:e})),a}},[]),l=(0,t.useCallback)(async(e,t)=>{s(e=>({...e,isLoading:!0,error:null}));try{let r=await fetch("/api/credits/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:e,paymentMethod:t})}),l=await r.json();if(!r.ok)throw Error(l.error||"Failed to purchase credits");return await a(),s(e=>({...e,isLoading:!1,error:null})),l}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,isLoading:!1,error:e})),a}},[a]),i=(0,t.useCallback)(async(e,a,t)=>{try{let s=await fetch("/api/credits/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repositorySize:e,fileCount:a,complexity:t})}),r=await s.json();if(!s.ok)throw Error(r.error||"Failed to calculate analysis cost");return r.cost}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,error:e})),a}},[]),n=(0,t.useCallback)(()=>{s(e=>({...e,error:null}))},[]);return(0,t.useEffect)(()=>{a().catch(console.error)},[a]),{...e,refreshBalance:a,getTransactionHistory:r,purchaseCredits:l,calculateAnalysisCost:i,clearError:n}}}},e=>{e.O(0,[545,295,346,908,673,441,696,358],()=>e(e.s=80503)),_N_E=e.O()}]);