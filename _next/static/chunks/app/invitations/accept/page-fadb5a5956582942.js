(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{3998:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var a=s(95155),r=s(12115),i=s(32467),n=s(83101),l=s(64269);let c=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:d=!1,...o}=e,m=d?i.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(c({variant:r,size:n,className:s})),ref:t,...o})});d.displayName="Button"},18332:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>c,TN:()=>d});var a=s(95155),r=s(12115),i=s(83101),n=s(64269);let l=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(l({variant:r}),s),...i})});c.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",s),...r})});d.displayName="AlertDescription"},20063:(e,t,s)=>{"use strict";var a=s(47260);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},23664:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},35299:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},36577:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(95155),r=s(12115),i=s(49295),n=s(20063),l=s(86948),c=s(3998),d=s(18332),o=s(35299),m=s(78874),u=s(42529),x=s(23664),h=s(52277);function f(){if(i.j)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Invitations Disabled"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Organization invitations are not available in the static demo."})]})});let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{user:s,loading:f}=(0,h.A)(),[v,p]=(0,r.useState)(null),[j,g]=(0,r.useState)(!0),[N,b]=(0,r.useState)(!1),[y,w]=(0,r.useState)(null),[k,A]=(0,r.useState)(!1),R=t.get("token");(0,r.useEffect)(()=>{if(!R){w("Invalid invitation link"),g(!1);return}C()},[R]);let C=async()=>{try{let e=await fetch("/api/invitations/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:R})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to validate invitation");p(t.invitation)}catch(e){w(e instanceof Error?e.message:"Failed to validate invitation")}finally{g(!1)}},T=async()=>{if(R&&s){b(!0),w(null);try{let t=await fetch("/api/invitations/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:R})}),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to accept invitation");A(!0),setTimeout(()=>{e.push("/dashboard")},2e3)}catch(e){w(e instanceof Error?e.message:"Failed to accept invitation")}finally{b(!1)}}};if(j||f)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{children:"Validating invitation..."})]})});if(y)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)(l.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(l.aR,{className:"text-center",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)(l.ZB,{children:"Invalid Invitation"}),(0,a.jsx)(l.BT,{children:"This invitation link is invalid or has expired."})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)(d.Fc,{children:(0,a.jsx)(d.TN,{children:y})}),(0,a.jsx)(c.$,{onClick:()=>e.push("/"),className:"w-full mt-4",children:"Go to Home"})]})]})});if(k)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)(l.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(l.aR,{className:"text-center",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),(0,a.jsx)(l.ZB,{children:"Welcome to the Team!"}),(0,a.jsxs)(l.BT,{children:["You've successfully joined ",null==v?void 0:v.organizationName]})]}),(0,a.jsxs)(l.Wu,{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Redirecting you to the dashboard..."}),(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin mx-auto"})]})]})});if(!s)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)(l.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(l.aR,{className:"text-center",children:[(0,a.jsx)(x.A,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),(0,a.jsx)(l.ZB,{children:"Sign In Required"}),(0,a.jsx)(l.BT,{children:"Please sign in to accept this invitation"})]}),(0,a.jsxs)(l.Wu,{children:[v&&(0,a.jsxs)("div",{className:"bg-muted p-4 rounded-lg mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Invitation Details"}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Organization:"})," ",v.organizationName]}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Role:"})," ",v.role]}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Invited by:"})," ",v.inviterName]})]}),(0,a.jsx)(c.$,{onClick:()=>e.push("/auth/login?redirect=".concat(encodeURIComponent(window.location.href))),className:"w-full",children:"Sign In to Accept"})]})]})});let S=s.email!==(null==v?void 0:v.email);return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)(l.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(l.aR,{className:"text-center",children:[(0,a.jsx)(x.A,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),(0,a.jsx)(l.ZB,{children:"Organization Invitation"}),(0,a.jsx)(l.BT,{children:"You've been invited to join an organization"})]}),(0,a.jsxs)(l.Wu,{children:[v&&(0,a.jsxs)("div",{className:"bg-muted p-4 rounded-lg mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Invitation Details"}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Organization:"})," ",v.organizationName]}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Role:"})," ",v.role]}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Invited by:"})," ",v.inviterName]}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Expires:"})," ",new Date(v.expiresAt).toLocaleDateString()]})]}),S&&(0,a.jsx)(d.Fc,{className:"mb-4",children:(0,a.jsxs)(d.TN,{children:["This invitation was sent to ",null==v?void 0:v.email,", but you're signed in as ",s.email,". Please sign in with the correct email address to accept this invitation."]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.$,{onClick:()=>e.push("/dashboard"),variant:"outline",className:"flex-1",children:"Cancel"}),(0,a.jsx)(c.$,{onClick:T,disabled:N||S,className:"flex-1",children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin mr-2"}),"Accepting..."]}):"Accept Invitation"})]}),y&&(0,a.jsx)(d.Fc,{className:"mt-4",children:(0,a.jsx)(d.TN,{children:y})})]})]})})}},42529:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},49295:(e,t,s)=>{"use strict";s.d(t,{j:()=>a});let a=!0},52277:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>l,A:()=>n});var a=s(95155),r=s(12115);s(12553),s(52078),s(19708),s(87358);let i=(0,r.createContext)(void 0);function n(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function l(e){let{children:t}=e,[s,n]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{n({uid:"demo-user",email:"demo@example.com",displayName:"Demo User"}),c(!1)},[]);let d=async(e,t)=>{},o=async(e,t,s)=>{},m=async()=>{},u=async()=>{},x=async e=>{},h=async()=>{};return(0,a.jsx)(i.Provider,{value:{user:s,loading:l,signIn:d,signUp:o,signInWithGoogle:m,logout:u,resetPassword:x,sendVerificationEmail:h},children:t})}},57377:(e,t,s)=>{Promise.resolve().then(s.bind(s,36577))},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(2821),r=s(75889);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},78874:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},86948:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>l});var a=s(95155),r=s(12115),i=s(64269);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"}},e=>{e.O(0,[135,965,17,545,441,696,358],()=>e(e.s=57377)),_N_E=e.O()}]);