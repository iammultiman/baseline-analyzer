(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{84762:(e,s,a)=>{Promise.resolve().then(a.bind(a,93488))},90839:(e,s,a)=>{"use strict";a.d(s,{J:()=>i});var t=a(12115);function i(){let[e,s]=(0,t.useState)({balance:0,isLoading:!1,error:null,transactions:[]}),a=(0,t.useCallback)(async()=>{s(e=>({...e,isLoading:!0,error:null}));try{let e=await fetch("/api/credits"),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to fetch credit balance");return s(e=>({...e,isLoading:!1,balance:a.balance,error:null})),a.balance}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,isLoading:!1,error:e})),a}},[]),i=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;s(e=>({...e,isLoading:!0,error:null}));try{let t=new URLSearchParams({page:e.toString(),limit:a.toString()}),i=await fetch("/api/credits/history?".concat(t)),r=await i.json();if(!i.ok)throw Error(r.error||"Failed to fetch transaction history");let l=r.transactions.map(e=>({...e,createdAt:new Date(e.createdAt)}));return s(e=>({...e,isLoading:!1,transactions:l,error:null})),r}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,isLoading:!1,error:e})),a}},[]),r=(0,t.useCallback)(async(e,t)=>{s(e=>({...e,isLoading:!0,error:null}));try{let i=await fetch("/api/credits/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:e,paymentMethod:t})}),r=await i.json();if(!i.ok)throw Error(r.error||"Failed to purchase credits");return await a(),s(e=>({...e,isLoading:!1,error:null})),r}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,isLoading:!1,error:e})),a}},[a]),l=(0,t.useCallback)(async(e,a,t)=>{try{let s=await fetch("/api/credits/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repositorySize:e,fileCount:a,complexity:t})}),i=await s.json();if(!s.ok)throw Error(i.error||"Failed to calculate analysis cost");return i.cost}catch(a){let e=a instanceof Error?a.message:"Unknown error";throw s(s=>({...s,error:e})),a}},[]),n=(0,t.useCallback)(()=>{s(e=>({...e,error:null}))},[]);return(0,t.useEffect)(()=>{a().catch(console.error)},[a]),{...e,refreshBalance:a,getTransactionHistory:i,purchaseCredits:r,calculateAnalysisCost:l,clearError:n}}},93488:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ej});var t=a(95155),i=a(58913),r=a(53635),l=a(12115),n=a(86948),c=a(13406),d=a(3998),o=a(11647),m=a(18332),x=a(48055),h=a(52056),u=a(78519),j=a(80534),p=a(54485),f=a(15870),g=a(1524),N=a(85998);function y(e){var s,a;let{onPurchaseClick:i}=e,[r,c]=(0,l.useState)(null),[m,u]=(0,l.useState)(!0),[j,p]=(0,l.useState)(null);(0,l.useEffect)(()=>{f()},[]);let f=async()=>{try{u(!0);let e=await fetch("/api/credits?includeStats=true");if(!e.ok)throw Error("Failed to fetch credit information");let s=await e.json();c(s)}catch(e){p(e instanceof Error?e.message:"Unknown error")}finally{u(!1)}};if(m)return(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})})});if(j)return(0,t.jsx)(n.Zp,{children:(0,t.jsxs)(n.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"text-red-600",children:["Error: ",j]}),(0,t.jsx)(d.$,{onClick:f,variant:"outline",size:"sm",className:"mt-2",children:"Retry"})]})});if(!r)return null;let N=r.balance<10,y=(null==(s=r.usageLimits)?void 0:s.dailyLimitReached)||(null==(a=r.usageLimits)?void 0:a.monthlyLimitReached);return(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:"Credit Balance"}),(0,t.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold flex items-center gap-2",children:[r.balance,N&&(0,t.jsxs)(o.E,{variant:"destructive",className:"text-xs",children:[(0,t.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Low"]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Available credits"}),N&&(0,t.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Consider purchasing more credits to continue analyzing repositories"})]}),(0,t.jsx)(d.$,{onClick:i,size:"sm",variant:N?"default":"outline",className:N?"bg-orange-600 hover:bg-orange-700":"",children:"Buy Credits"})]}),r.stats&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:r.stats.totalCreditsUsed}),(0,t.jsxs)("div",{className:"text-muted-foreground",children:["Used (",r.stats.period,")"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:r.stats.analysisCount}),(0,t.jsx)("div",{className:"text-muted-foreground",children:"Analyses"})]})]}),r.stats.averageCreditsPerAnalysis>0&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(g.A,{className:"h-3 w-3"}),"Avg: ",r.stats.averageCreditsPerAnalysis.toFixed(1)," credits per analysis"]})]}),y&&r.usageLimits&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{className:"font-medium text-amber-600 mb-2",children:"Usage Limits"}),r.usageLimits.dailyLimitReached&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Daily limit reached: ",r.usageLimits.dailyUsage,"/",r.usageLimits.limits.freeUserDailyLimit]}),r.usageLimits.monthlyLimitReached&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Monthly limit reached: ",r.usageLimits.monthlyUsage,"/",r.usageLimits.limits.freeUserMonthlyLimit]})]})})]})]})}var v=a(51834),w=a(24058),b=a(99051),C=a(64269);let k=l.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(w.bL,{className:(0,C.cn)("grid gap-2",a),...i,ref:s})});k.displayName=w.bL.displayName;let S=l.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(w.q7,{ref:s,className:(0,C.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...i,children:(0,t.jsx)(w.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(b.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});S.displayName=w.q7.displayName;var A=a(76444),E=a(35299),P=a(6132),L=a(5917),U=a(18720);function R(e){let{onPurchaseComplete:s}=e,[a,i]=(0,l.useState)([]),[r,x]=(0,l.useState)(""),[h,j]=(0,l.useState)(!1),[p,f]=(0,l.useState)(!1),[g,N]=(0,l.useState)(!1),[y,w]=(0,l.useState)("demo"),[b,C]=(0,l.useState)(null),[R,Z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{g&&F()},[g]),(0,l.useEffect)(()=>{g&&"stripe"===y&&B()},[g,y]);let B=async()=>{try{let e=await fetch("/api/credits/payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:"starter"})});Z(503!==e.status)}catch(e){Z(!1)}},F=async()=>{try{j(!0);let e=await fetch("/api/credits/packages");if(!e.ok)throw Error("Failed to fetch credit packages");let s=await e.json();i(s.packages),s.packages.length>0&&x(s.packages[0].id)}catch(e){U.toast.error(e instanceof Error?e.message:"Failed to load packages")}finally{j(!1)}},T=async()=>{if(!r)return void U.toast.error("Please select a package");try{f(!0);let e=await fetch("/api/credits/payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:r})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to create payment intent")}let s=await e.json();C(s.paymentIntent),setTimeout(()=>{z(s.paymentIntent.id)},2e3)}catch(e){U.toast.error(e instanceof Error?e.message:"Failed to create payment intent"),f(!1)}},z=async e=>{try{let a=await fetch("/api/credits/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:r,paymentIntentId:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Purchase failed")}let t=await a.json();U.toast.success("Successfully purchased ".concat(t.package.credits," credits!")),s&&s(t.newBalance),N(!1),C(null)}catch(e){U.toast.error(e instanceof Error?e.message:"Purchase failed")}finally{f(!1)}},O=async()=>{if(!r)return void U.toast.error("Please select a package");try{f(!0);let e=await fetch("/api/credits/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:r,useDemo:!0})});if(!e.ok){let s=await e.json();throw Error(s.error||"Purchase failed")}let a=await e.json();U.toast.success("Successfully purchased ".concat(a.package.credits," credits!")),s&&s(a.newBalance),N(!1)}catch(e){U.toast.error(e instanceof Error?e.message:"Purchase failed")}finally{f(!1)}},W=e=>"$".concat((e/100).toFixed(2)),D=a.find(e=>e.id===r);return(0,t.jsxs)(v.lG,{open:g,onOpenChange:N,children:[(0,t.jsx)(v.zM,{asChild:!0,children:(0,t.jsxs)(d.$,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Buy Credits"]})}),(0,t.jsxs)(v.Cf,{className:"sm:max-w-md",children:[(0,t.jsx)(v.c7,{children:(0,t.jsx)(v.L3,{children:"Purchase Credits"})}),h?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(E.A,{className:"h-6 w-6 animate-spin"})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(k,{value:r,onValueChange:x,children:a.map(e=>{let s;return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(S,{value:e.id,id:e.id}),(0,t.jsx)(A.J,{htmlFor:e.id,className:"flex-1 cursor-pointer",children:(0,t.jsxs)(n.Zp,{className:"p-4 hover:bg-accent transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.credits," credits"]}),e.description&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:e.description})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-bold",children:W(e.price)}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["$",(s=e.credits,(e.price/100/s).toFixed(3)),"/credit"]})]})]}),"professional"===e.id&&(0,t.jsx)(o.E,{variant:"secondary",className:"mt-2",children:"Most Popular"})]})})]},e.id)})}),(0,t.jsxs)(c.tU,{value:y,onValueChange:e=>w(e),children:[(0,t.jsxs)(c.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(c.Xi,{value:"demo",children:"Demo Mode"}),(0,t.jsx)(c.Xi,{value:"stripe",disabled:!R,children:"Production Payment"})]}),(0,t.jsx)(c.av,{value:"demo",className:"space-y-4",children:(0,t.jsxs)(m.Fc,{children:[(0,t.jsx)(P.A,{className:"h-4 w-4"}),(0,t.jsx)(m.TN,{children:"Demo mode - No actual payment will be processed. Credits will be added to your account for testing."})]})}),(0,t.jsx)(c.av,{value:"stripe",className:"space-y-4",children:R?(0,t.jsxs)(m.Fc,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsx)(m.TN,{children:"Production payment processing via Stripe. Your card will be charged."})]}):(0,t.jsxs)(m.Fc,{children:[(0,t.jsx)(P.A,{className:"h-4 w-4"}),(0,t.jsx)(m.TN,{children:"Payment processing is not configured. Please contact support or use demo mode."})]})})]}),D&&(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-medium mb-2",children:"Purchase Summary"}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{children:[D.credits," credits"]}),(0,t.jsxs)("span",{children:["$",W(D.price)]})]}),b&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Payment Intent: ",b.id]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(d.$,{variant:"outline",onClick:()=>N(!1),className:"flex-1",disabled:p,children:"Cancel"}),(0,t.jsx)(d.$,{onClick:()=>{"demo"===y?O():T()},disabled:!r||p||"stripe"===y&&!R,className:"flex-1",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mr-2 animate-spin"}),b?"Processing Payment...":"Creating Payment..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.A,{className:"h-4 w-4 mr-2"}),(0,t.jsx)("span",{children:"Purchase"}),"demo"===y&&(0,t.jsx)("span",{"aria-hidden":"true",className:"ml-1 text-xs font-normal",children:"(Demo)"})]})})]})]})]})]})}var Z=a(17037),B=a(68695),F=a(94954),T=a(60709),z=a(89559),O=a(64662);function W(e){let{limit:s=20}=e,[a,i]=(0,l.useState)([]),[r,c]=(0,l.useState)(!0),[m,x]=(0,l.useState)(null),[h,u]=(0,l.useState)(0),[j,p]=(0,l.useState)(!0);(0,l.useEffect)(()=>{f(0)},[]);let f=async e=>{try{c(!0);let a=await fetch("/api/credits?includeHistory=true&limit=".concat(s,"&offset=").concat(e));if(!a.ok)throw Error("Failed to fetch transaction history");let t=await a.json();0===e?i(t.history||[]):i(e=>[...e,...t.history||[]]),p((t.history||[]).length===s),u(e+s)}catch(e){x(e instanceof Error?e.message:"Unknown error")}finally{c(!1)}};return r&&0===a.length?(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Transaction History"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(E.A,{className:"h-6 w-6 animate-spin"})})})]}):m?(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Transaction History"})}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsxs)("div",{className:"text-red-600",children:["Error: ",m]}),(0,t.jsx)(d.$,{onClick:()=>f(0),variant:"outline",size:"sm",className:"mt-2",children:"Retry"})]})]}):(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Transaction History"})}),(0,t.jsx)(n.Wu,{children:0===a.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No transactions yet"}):(0,t.jsxs)(Z.F,{className:"h-[400px]",children:[(0,t.jsx)("div",{className:"space-y-3",children:a.map(e=>{var s,a;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{switch(e){case"PURCHASE":return(0,t.jsx)(B.A,{className:"h-4 w-4 text-green-600"});case"DEDUCTION":return(0,t.jsx)(F.A,{className:"h-4 w-4 text-red-600"});case"BONUS":return(0,t.jsx)(T.A,{className:"h-4 w-4 text-blue-600"});case"REFUND":return(0,t.jsx)(z.A,{className:"h-4 w-4 text-orange-600"});default:return(0,t.jsx)(B.A,{className:"h-4 w-4 text-gray-600"})}})(e.type),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.description}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,O.GP)(new Date(e.createdAt),"MMM d, yyyy h:mm a")})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-medium ".concat((e=>{switch(e){case"PURCHASE":return"text-green-600";case"DEDUCTION":return"text-red-600";case"BONUS":return"text-blue-600";case"REFUND":return"text-orange-600";default:return"text-gray-600"}})(e.type)),children:(s=e.amount,a=e.type,"".concat("DEDUCTION"===a?"":"+").concat(s))}),(0,t.jsx)(o.E,{variant:"outline",className:"text-xs",children:e.type.toLowerCase()})]})]},e.id)})}),j&&(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)(d.$,{onClick:()=>{!r&&j&&f(h)},variant:"outline",size:"sm",disabled:r,children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):"Load More"})})]})})]})}var D=a(26921),$=a(65229);function I(){let[e,s]=(0,l.useState)([]),[a,i]=(0,l.useState)(null),[r,c]=(0,l.useState)(!0),[x,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{p(),g()},[]);let p=async()=>{try{let e=await fetch("/api/credits/notifications");if(e.ok){let a=await e.json();s(a.notifications||[])}}catch(e){console.error("Failed to fetch notifications:",e)}},g=async()=>{try{let e=await fetch("/api/credits/notification-settings");if(e.ok){let s=await e.json();i(s.settings)}}catch(e){console.error("Failed to fetch notification settings:",e)}finally{c(!1)}},y=async e=>{try{(await fetch("/api/credits/notifications/".concat(e),{method:"DELETE"})).ok&&(s(s=>s.filter(s=>s.id!==e)),U.toast.success("Notification dismissed"))}catch(e){U.toast.error("Failed to dismiss notification")}},v=async e=>{try{let s=await fetch("/api/credits/notification-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok){let e=await s.json();i(e.settings),U.toast.success("Notification settings updated")}}catch(e){U.toast.error("Failed to update settings")}};return r?(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),(0,t.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]}):0===e.length?null:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-5 w-5"}),"Credit Notifications",e.length>0&&(0,t.jsx)(o.E,{variant:"secondary",children:e.length})]}),(0,t.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>j(!x),children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),x&&a&&(0,t.jsx)(n.Zp,{children:(0,t.jsxs)(n.Wu,{className:"p-4 space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Notification Settings"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm",children:"Low balance alerts"}),(0,t.jsx)("input",{type:"checkbox",checked:a.enableLowBalanceAlerts,onChange:e=>v({enableLowBalanceAlerts:e.target.checked}),className:"rounded"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm",children:"Usage limit alerts"}),(0,t.jsx)("input",{type:"checkbox",checked:a.enableUsageLimitAlerts,onChange:e=>v({enableUsageLimitAlerts:e.target.checked}),className:"rounded"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm",children:"Spending alerts"}),(0,t.jsx)("input",{type:"checkbox",checked:a.enableSpendingAlerts,onChange:e=>v({enableSpendingAlerts:e.target.checked}),className:"rounded"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm",children:"Recommendations"}),(0,t.jsx)("input",{type:"checkbox",checked:a.enableRecommendations,onChange:e=>v({enableRecommendations:e.target.checked}),className:"rounded"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm",children:"Low balance threshold"}),(0,t.jsx)("input",{type:"number",value:a.lowBalanceThreshold,onChange:e=>v({lowBalanceThreshold:parseInt(e.target.value)}),className:"w-20 px-2 py-1 border rounded text-sm",min:"1",max:"100"})]})]})]})}),(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,t.jsx)(m.Fc,{className:"".concat((e=>{switch(e){case"critical":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-amber-600 bg-amber-50 border-amber-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}})(e.severity)," border"),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(e=>{switch(e){case"low_balance":return(0,t.jsx)(h.A,{className:"h-4 w-4"});case"usage_limit":return(0,t.jsx)(D.A,{className:"h-4 w-4"});case"spending_alert":return(0,t.jsx)(u.A,{className:"h-4 w-4"});default:return(0,t.jsx)(N.A,{className:"h-4 w-4"})}})(e.type),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.title}),(0,t.jsx)(m.TN,{className:"text-sm mt-1",children:e.message}),e.actionLabel&&e.actionUrl&&(0,t.jsx)(d.$,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>window.location.href=e.actionUrl,children:e.actionLabel})]})]}),e.dismissible&&(0,t.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>y(e.id),className:"h-6 w-6 p-0","aria-label":"Dismiss notification",children:[(0,t.jsx)($.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Dismiss"})]})]})},e.id))})]})}var M=a(26991),J=a(80019),K=a(68425),X=a(47734),H=a(73697),V=a(10232),_=a(89585),q=a(12723),G=a(4035),Y=a(69386),Q=a(98128),ee=a(58155),es=a(50906),ea=a(30814),et=a(91761),ei=a(16485);let er=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function el(){let[e,s]=(0,l.useState)(null),[a,i]=(0,l.useState)(!0),[r,o]=(0,l.useState)(null),[m,x]=(0,l.useState)("30d");(0,l.useEffect)(()=>{h()},[m]);let h=async()=>{try{i(!0),o(null);let e=await fetch("/api/credits/analytics?range=".concat(m));if(!e.ok)throw Error("Failed to fetch usage analytics");let a=await e.json();s(a)}catch(e){o(e instanceof Error?e.message:"Unknown error")}finally{i(!1)}},u=e=>"$".concat((e/100).toFixed(2));return a?(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(E.A,{className:"h-6 w-6 animate-spin"}),(0,t.jsx)("span",{className:"ml-2",children:"Loading analytics..."})]})})}):r?(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-red-600 text-center",children:[(0,t.jsxs)("p",{children:["Error: ",r]}),(0,t.jsxs)(d.$,{onClick:h,variant:"outline",size:"sm",className:"mt-2",children:[(0,t.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})}):e?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Usage Analytics"}),(0,t.jsx)("div",{className:"inline-flex items-center rounded-md border bg-muted p-1 text-muted-foreground",role:"tablist","aria-label":"Select time range",children:[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"}].map(e=>{let{value:s,label:a}=e;return(0,t.jsx)("button",{type:"button",role:"tab","aria-selected":m===s,className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ".concat(m===s?"bg-background text-foreground shadow-sm":"text-muted-foreground"),onClick:()=>x(s),children:a},s)})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:"Credits Used"}),(0,t.jsx)(es.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.overview.totalCreditsUsed}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.overview.period})]})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:"Analyses"}),(0,t.jsx)(ea.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.overview.totalAnalyses}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Avg: ",e.overview.averageCreditsPerAnalysis.toFixed(1)," credits each"]})]})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Spent"}),(0,t.jsx)(et.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:u(e.overview.totalSpent)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Credit purchases"})]})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ZB,{className:"text-sm font-medium",children:"Monthly Projection"}),(0,t.jsx)(ei.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.projections.monthlyProjection}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Credits per month"})]})]})]}),(0,t.jsxs)(c.tU,{defaultValue:"trends",className:"w-full",children:[(0,t.jsxs)(c.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(c.Xi,{value:"trends",children:"Usage Trends"}),(0,t.jsx)(c.Xi,{value:"breakdown",children:"Usage Breakdown"}),(0,t.jsx)(c.Xi,{value:"projections",children:"Projections"})]}),(0,t.jsx)(c.av,{value:"trends",className:"space-y-4",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Credit Usage Over Time"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)(M.u,{width:"100%",height:300,children:(0,t.jsxs)(J.b,{data:e.trends.daily,children:[(0,t.jsx)(K.d,{strokeDasharray:"3 3"}),(0,t.jsx)(X.W,{dataKey:"date"}),(0,t.jsx)(H.h,{}),(0,t.jsx)(V.m,{}),(0,t.jsx)(_.N,{type:"monotone",dataKey:"creditsUsed",stroke:"#8884d8",strokeWidth:2,name:"Credits Used"}),(0,t.jsx)(_.N,{type:"monotone",dataKey:"analyses",stroke:"#82ca9d",strokeWidth:2,name:"Analyses"})]})})})]})}),(0,t.jsx)(c.av,{value:"breakdown",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Usage by Complexity"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)(M.u,{width:"100%",height:250,children:(0,t.jsxs)(q.r,{children:[(0,t.jsx)(G.F,{data:e.breakdown.byComplexity,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,percentage:a}=e;return"".concat(s," (").concat(a,"%)")},outerRadius:80,fill:"#8884d8",dataKey:"creditsUsed",children:e.breakdown.byComplexity.map((e,s)=>(0,t.jsx)(Y.f,{fill:er[s%er.length]},"cell-".concat(s)))}),(0,t.jsx)(V.m,{})]})})})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Usage by Repository Size"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)(M.u,{width:"100%",height:250,children:(0,t.jsxs)(Q.E,{data:e.breakdown.byRepositorySize,children:[(0,t.jsx)(K.d,{strokeDasharray:"3 3"}),(0,t.jsx)(X.W,{dataKey:"sizeRange"}),(0,t.jsx)(H.h,{}),(0,t.jsx)(V.m,{}),(0,t.jsx)(ee.y,{dataKey:"creditsUsed",fill:"#8884d8",name:"Credits Used"})]})})})]})]})}),(0,t.jsx)(c.av,{value:"projections",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Monthly Projection"})}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:e.projections.monthlyProjection}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Credits per month (projected)"})]}),e.projections.recommendedPackage&&(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"font-medium text-blue-900",children:"Recommended Package"}),(0,t.jsx)("div",{className:"text-sm text-blue-700",children:e.projections.recommendedPackage})]})]})]}),e.projections.savingsOpportunity&&(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Savings Opportunity"})}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-green-600",children:u(e.projections.savingsOpportunity)}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Potential monthly savings"})]}),(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"font-medium text-green-900",children:"Optimization Tip"}),(0,t.jsx)("div",{className:"text-sm text-green-700",children:"Consider purchasing a larger package to reduce per-credit costs"})]})]})]})]})})]})]}):null}var en=a(90839);function ec(e){let{showNotifications:s=!0,showAnalytics:a=!0,compact:i=!1}=e,{balance:r,refreshBalance:v}=(0,en.J)(),[w,b]=(0,l.useState)("overview"),[C,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{v()},[v]);let S=r<10,A=r<5,E=()=>{v(),k(!1)};return i?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(x.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-lg font-semibold",children:r}),S&&(0,t.jsx)(o.E,{variant:A?"destructive":"secondary",className:"text-xs",children:A?"Critical":"Low"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Credits available"})]})]}),(0,t.jsx)(d.$,{size:"sm",onClick:()=>k(!0),variant:S?"default":"outline",children:"Buy Credits"})]})})}),S&&(0,t.jsxs)(m.Fc,{variant:A?"destructive":"default",children:[(0,t.jsx)(h.A,{className:"h-4 w-4"}),(0,t.jsx)(m.TN,{children:A?"Critical: You have very few credits remaining. Purchase more to continue analyzing repositories.":"Low balance: Consider purchasing more credits to avoid interruptions."})]}),C&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Purchase Credits"}),(0,t.jsx)(d.$,{variant:"ghost",size:"sm",onClick:()=>k(!1),children:"\xd7"})]}),(0,t.jsx)(R,{onPurchaseComplete:E})]})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-6 w-6"}),(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Credit Management"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:S&&(0,t.jsxs)(o.E,{variant:A?"destructive":"secondary",children:[(0,t.jsx)(h.A,{className:"h-3 w-3 mr-1"}),A?"Critical Balance":"Low Balance"]})})]}),s&&(0,t.jsx)(I,{}),(0,t.jsxs)(c.tU,{value:w,onValueChange:b,className:"w-full",children:[(0,t.jsxs)(c.j7,{className:"grid w-full grid-cols-5",children:[(0,t.jsxs)(c.Xi,{value:"overview",className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),"Overview"]}),(0,t.jsxs)(c.Xi,{value:"analytics",className:"flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Analytics"]}),(0,t.jsxs)(c.Xi,{value:"history",className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),"History"]}),(0,t.jsxs)(c.Xi,{value:"purchase",className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),"Purchase"]}),(0,t.jsxs)(c.Xi,{value:"settings",className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),"Settings"]})]}),(0,t.jsx)(c.av,{value:"overview",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(y,{onPurchaseClick:()=>b("purchase")})}),(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"h-5 w-5"}),"Quick Stats"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"15"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Analyses This Month"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"8.5"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Avg Credits/Analysis"})]})]})})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-5 w-5"}),"Recommendations"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium",children:"Consider the Professional Pack"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Based on your usage, you could save 15% with a larger package"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium",children:"Optimize repository size"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Smaller repositories use fewer credits per analysis"})]})]})]})})]})]})]})}),(0,t.jsx)(c.av,{value:"analytics",className:"space-y-4",children:a&&(0,t.jsx)(el,{})}),(0,t.jsx)(c.av,{value:"history",className:"space-y-4",children:(0,t.jsx)(W,{})}),(0,t.jsx)(c.av,{value:"purchase",className:"space-y-4",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Purchase Credits"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)(R,{onPurchaseComplete:E})})]})}),(0,t.jsx)(c.av,{value:"settings",className:"space-y-4",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Credit Settings"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,t.jsx)("p",{children:"Manage your credit preferences and notification settings."})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Low Balance Alerts"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Get notified when credits are running low"})]}),(0,t.jsx)(d.$,{variant:"outline",size:"sm",children:"Configure"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Usage Analytics"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Track your credit usage patterns"})]}),(0,t.jsx)(d.$,{variant:"outline",size:"sm",children:"View Details"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Auto-Purchase"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Automatically buy credits when running low"})]}),(0,t.jsx)(d.$,{variant:"outline",size:"sm",children:"Set Up"})]})]})]})})]})})]})]})}var ed=a(65142),eo=a(83026);let em=l.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsxs)(eo.bL,{ref:s,className:(0,C.cn)("relative flex w-full touch-none select-none items-center",a),...i,children:[(0,t.jsx)(eo.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(eo.Q6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(eo.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});em.displayName=eo.bL.displayName;var ex=a(80647),eh=a(42529);function eu(e){var s,a;let{repositorySize:i=0,fileCount:r=0,onCalculate:c}=e,[m,x]=(0,l.useState)(i),[u,j]=(0,l.useState)(r),[p,f]=(0,l.useState)([5]),[g,N]=(0,l.useState)(null),[y,v]=(0,l.useState)(!1),[w,b]=(0,l.useState)(null);(0,l.useEffect)(()=>{x(i),j(r)},[i,r]),(0,l.useEffect)(()=>{(m>0||u>0)&&C()},[m,u,p]);let C=async()=>{if(m<0||u<0)return void b("Size and file count must be non-negative");try{v(!0),b(null);let e=await fetch("/api/credits/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repositorySize:m,fileCount:u,complexity:p[0]})});if(!e.ok){let s=await e.json();throw Error(s.error||"Calculation failed")}let s=await e.json();N(s),c&&c(s.creditCost,s.hasSufficientCredits)}catch(e){b(e instanceof Error?e.message:"Unknown error")}finally{v(!1)}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ex.A,{className:"h-5 w-5"}),"Credit Cost Calculator"]})}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(A.J,{htmlFor:"size",children:"Repository Size (KB)"}),(0,t.jsx)(ed.p,{id:"size",type:"number",value:m,onChange:e=>x(parseInt(e.target.value)||0),placeholder:"Enter size in KB"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.J,{htmlFor:"files",children:"File Count"}),(0,t.jsx)(ed.p,{id:"files",type:"number",value:u,onChange:e=>j(parseInt(e.target.value)||0),placeholder:"Number of files"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(A.J,{children:["Project Complexity: ",(s=p[0])<=2?"Very Simple":s<=4?"Simple":s<=6?"Moderate":s<=8?"Complex":"Very Complex"]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)(em,{value:p,onValueChange:f,max:10,min:1,step:1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,t.jsx)("span",{children:"Simple"}),(0,t.jsx)("span",{children:"Complex"})]})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:(a=p[0])<=2?"Basic HTML/CSS, minimal JavaScript":a<=4?"Simple web app, few dependencies":a<=6?"Standard web app with frameworks":a<=8?"Complex app with many dependencies":"Enterprise app with advanced features"})]}),w&&(0,t.jsxs)("div",{className:"text-red-600 text-sm flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-4 w-4"}),w]}),g&&!y&&(0,t.jsxs)("div",{className:"space-y-3 p-4 bg-muted rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:"Estimated Cost:"}),(0,t.jsxs)(o.E,{variant:"outline",className:"text-lg px-3 py-1",children:[g.creditCost," credits"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{children:"Your Balance:"}),(0,t.jsxs)("span",{className:"font-medium",children:[g.userBalance," credits"]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:g.hasSufficientCredits?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eh.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)("span",{className:"text-green-600 text-sm",children:"Sufficient credits available"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"h-4 w-4 text-red-600"}),(0,t.jsxs)("span",{className:"text-red-600 text-sm",children:["Insufficient credits (need ",g.creditCost-g.userBalance," more)"]})]})}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsx)("div",{children:"Calculation breakdown:"}),(0,t.jsxs)("div",{children:["• Repository size: ",g.calculation.repositorySize," KB"]}),(0,t.jsxs)("div",{children:["• File count: ",g.calculation.fileCount]}),(0,t.jsxs)("div",{children:["• Complexity: ",g.calculation.complexity,"/10"]})]})]}),(m>0||u>0)&&(0,t.jsx)(d.$,{onClick:C,disabled:y,className:"w-full",children:y?"Calculating...":"Calculate Cost"})]})]})}function ej(){return(0,t.jsx)(i.O,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,t.jsx)(r.V,{}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(ec,{}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Credit Calculator"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)(eu,{repositorySize:1500,fileCount:75,onCalculate:(e,s)=>{console.log("Analysis cost:",e,"Has sufficient credits:",s)}})})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Demo Information"})}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,t.jsx)("p",{children:"This is a demonstration of the credit management system. Key features:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,t.jsx)("li",{children:"Comprehensive credit balance display with low balance warnings"}),(0,t.jsx)("li",{children:"Real-time usage analytics and spending projections"}),(0,t.jsx)("li",{children:"Smart notifications for low balance, usage limits, and recommendations"}),(0,t.jsx)("li",{children:"Detailed transaction history with filtering and pagination"}),(0,t.jsx)("li",{children:"Streamlined credit purchase flow with package recommendations"}),(0,t.jsx)("li",{children:"Usage analytics dashboard with trends and breakdowns"})]})]}),(0,t.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,t.jsx)("strong",{children:"Note:"})," This is a demo environment. Credit purchases are simulated and no actual payments are processed."]})})]})]})]})]})})})})}}},e=>{e.O(0,[135,965,17,545,619,295,908,624,910,22,441,696,358],()=>e(e.s=84762)),_N_E=e.O()}]);